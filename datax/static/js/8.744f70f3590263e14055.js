webpackJsonp([8],{Efj2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("BO1k"),n=a.n(r),s=a("Y8t/"),i=a("nSkA"),c={name:"TyAccountRate",data:function(){return{selectSearchMenu:"0",searchNowDate:Object(i.c)(Date.now()),tbodyHeight:0,proveName:"",tableData:[],searchMenuType:"",showNowDate:""}},mounted:function(){var t=this;this.$nextTick(function(){var e=window.screen.height-345;t.tbodyHeight=e}),this.getProvRate()},methods:{changes:function(){},getProvRate:function(){var t=this;this.returnsearchMenuType(),this.showNowDate=Object(i.a)(this.searchNowDate);var e={date_id:Object(i.a)(this.searchNowDate),acct_mode:this.selectSearchMenu};s.a.getRecRate(e).then(function(e){if("200"==e.code&&e.content.length>0){t.drawLine(e.content),t.tableData=[];var a=!0,r=!1,s=void 0;try{for(var i,c=n()(e.content);!(a=(i=c.next()).done);a=!0){var o=i.value,l={partner:o.prov_name,recRat:(100*o.rec_rat).toFixed(2)+"%"};t.tableData.push(l)}}catch(t){r=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(r)throw s}}}else t.$Message.warning("暂无数据")}).catch(function(t){})},drawLine:function(t){var e=this.$echarts.init(document.getElementById("myChart")),a={title:{text:"省份对账率分析情况",textStyle:{fontSize:14,color:"#333",fontWeight:400},x:"center",subtext:"各省份收入排行",subtextStyle:{fontSize:10,color:"#717b8d",fontWeight:400}},tooltip:{show:!0,formatter:function(t){if(void 0!=t.data)return t.name+"<br/>订单收入:"+t.data.value+"<br/>话单收入:"+t.data.billAmt}},visualMap:{show:!0,max:t[0].ord_amt,left:"left",top:"top",range:["0",t[0].ord_amt],text:[t[0].ord_amt,"0"],calculable:!0,inRange:{color:["#ffffff","#d00000"]}},series:[{name:"",type:"map",map:"china",roam:!1,label:{show:!1},data:this.getProvParam(t)}]};e.clear(),e.setOption(a,!0)},getProvParam:function(t){var e=[],a=!0,r=!1,s=void 0;try{for(var i,c=n()(t);!(a=(i=c.next()).done);a=!0){var o=i.value,l={name:o.prov_name,value:o.ord_amt,billAmt:o.bill_amt,prov_id:o.prov_id,prov_name:o.prov_name};e.push(l)}}catch(t){r=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(r)throw s}}return e.shift(),this.proveName=e[0].prov_name,e},changeSearchType:function(){this.getProvRate()},returnsearchMenuType:function(){switch(this.selectSearchMenu){case"0":this.searchMenuType="全部";break;case"1":this.searchMenuType="包月";break;case"4":this.searchMenuType="点播"}return this.searchMenuType}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"ty_topInput"},[a("span",[a("span",{staticClass:"ty_serachSapn"},[t._v("业务类型：")]),t._v(" "),a("Select",{staticStyle:{width:"150px"},attrs:{filterable:""},model:{value:t.selectSearchMenu,callback:function(e){t.selectSearchMenu=e},expression:"selectSearchMenu"}},[a("Option",{attrs:{value:"0"}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("包月")]),t._v(" "),a("Option",{attrs:{value:"4"}},[t._v("点播")])],1)],1),t._v(" "),a("span",[a("span",{staticClass:"ty_serachSapn"},[t._v("日期：")]),t._v(" "),a("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"请选择日期"},model:{value:t.searchNowDate,callback:function(e){t.searchNowDate=e},expression:"searchNowDate"}})],1),t._v(" "),a("span",[a("Button",{attrs:{type:"primary",icon:"search"},on:{click:t.changeSearchType}},[t._v("搜索")])],1)]),t._v(" "),a("div",{staticClass:"clearBox ty_reportMain"},[a("div",{staticClass:"clearBox ty_mainDiv"},[a("div",{staticClass:"orderTopInfo"},[a("div",{staticClass:"fl ty_mapReport ",attrs:{id:"myChart"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPartner,expression:"!isPartner"}],staticClass:"fr ty_tableReport"},[a("div",{staticClass:"ty_tableTitle"},[t._v(t._s(t.showNowDate)+" "+t._s(t.searchMenuType)+"业务 各省份对账率异常分析")]),t._v(" "),a("div",{staticClass:"ty_tableList"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.tbodyHeight,border:""}},[a("el-table-column",{attrs:{prop:"partner",label:"省份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recRat",label:"对账率"}})],1)],1)])])])])])},staticRenderFns:[]};var l=a("VU/8")(c,o,!1,function(t){a("W47R")},"data-v-27e11ab7",null);e.default=l.exports},W47R:function(t,e){}});